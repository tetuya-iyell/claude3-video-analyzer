# Gooseを利用した「ゆっくり不動産」台本生成機能

## 概要

Claude3 Video Analyzerに「ゆっくり不動産」台本生成機能を追加しました。この機能は、Gooseフレームワークの思想を活用したAI-Agentを実装し、章立て解析された動画内容から各章ごとの台本を自動生成します。台本は対話的にレビュー・フィードバック・改善を行えるインターフェースを提供します。

## 機能の詳細

### 1. AI-Agent による台本生成
- 章立て解析結果から各章ごとの台本を自動生成
- サンプル台本のスタイルを参考に一貫性のある台本作成
- 「ゆっくり不動産」形式の専門的な台本作成

### 2. 対話型の台本改善機能
- 台本内容に対するフィードバックの送信と記録
- フィードバックに基づく台本の自動改善提案
- 改善提案の確認と適用

### 3. 台本品質の自動分析
- 指定基準に基づく台本の品質チェック
  - ゆっくり実況の口調になっているか
  - 専門用語が適切に説明されているか
  - 重要なポイントが強調されているか
  - 具体的なアドバイスが含まれているか
  - 適切な台本形式が使われているか
- 分析結果に基づくアドバイス提供

### 4. 章ごとの進行管理
- 台本の作成状況の視覚的管理（ドラフト、レビュー中、承認済みなど）
- 承認済みの章から次の章への自動遷移
- すべての章の台本を一括で取得可能

## 技術詳細

### AI-Agent の設計

1. **ScriptAgent クラス**
   - Anthropic Claude モデルを活用した台本生成・分析エンジン
   - 章立て解析テキストから構造化データを抽出
   - プロンプトエンジニアリングによる専門的台本の生成

2. **サンプル学習機能**
   - 過去の台本を参照した一貫性のあるスタイルの維持
   - 承認された台本の自動保存と参照

3. **フィードバックループ**
   - 人間のフィードバックを取り入れた台本改善
   - 対話的な改善サイクル

### バックエンドAPI設計

```
/api/goose/analyze-chapters  # 章立て解析結果から章構造を抽出
/api/goose/generate-script   # 各章の台本生成
/api/goose/analyze-script    # 台本品質の分析
/api/goose/submit-feedback   # フィードバック提出と台本改善
/api/goose/apply-improvement # 改善提案の適用
/api/goose/get-all-scripts   # すべての台本を取得
```

### フロントエンド設計

- チャプターリストによる視覚的な進行管理
- 台本編集インターフェース
- フィードバック入力と表示機能
- 分析結果の視覚的表示

## 使用方法

1. 動画を章立て解析モードで解析
2. 「台本生成」ボタンをクリック
3. 各章の台本を確認・編集
4. 台本を分析して品質チェック
5. フィードバックを送信または承認
6. フィードバック内容に基づき改善された台本を確認・適用
7. 次の章へ進む

## 技術的な実装

- Langchain と Anthropic Claude APIの統合
- Flask Blueprintによるモジュール化API
- セッションベースの台本データ管理
- リアルタイムのUI更新

## 今後の展望

1. **マルチキャラクタ対応**:
   - 複数のキャラクターによる対話形式の台本生成
   - キャラクター別の口調・性格の設定

2. **台本テンプレートのカスタマイズ**:
   - ユーザー定義のテンプレート保存と使用
   - 業種・テーマに特化したテンプレート

3. **音声合成との連携**:
   - 生成された台本からゆっくりボイス音声の自動生成
   - 台詞とタイミングの最適化

4. **マルチエージェント連携**:
   - 専門知識に特化したエージェントの協調作業
   - 不動産知識エージェントと台本作成エージェントの分離と連携

5. **フィードバック学習機能の強化**:
   - 過去のフィードバックパターンに基づく自己改善
   - ユーザー好みの学習と適応